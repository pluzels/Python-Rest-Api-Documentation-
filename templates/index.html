<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Downloader</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>YouTube Downloader</h1>
    <input type="text" id="url" placeholder="Enter YouTube URL">
    <button id="getFormats">Get Formats</button>
    <div id="formatOptions"></div>
    <button id="downloadAudio">Download Audio</button>
    <button id="downloadVideo">Download Video</button>

    <script>
        $(document).ready(function () {
            $('#getFormats').click(function () {
                const url = $('#url').val();
                $.post('/video_formats', { url: url }, function (data) {
                    if (data.formats) {
                        let optionsHtml = '<select id="qualitySelect">';
                        data.formats.forEach(format => {
                            optionsHtml += `<option value="${format}">${format}</option>`;
                        });
                        optionsHtml += '</select>';
                        $('#formatOptions').html(optionsHtml);
                    } else {
                        alert(data.error);
                    }
                });
            });

            $('#downloadAudio').click(function () {
                const url = $('#url').val();
                const quality = $('#qualitySelect').val();
                $.post('/download', { url: url, quality: quality }, function (data) {
                    if (data.download_url) {
                        window.location.href = data.download_url;  // Arahkan ke link download
                    } else {
                        alert(data.error);
                    }
                });
            });

            $('#downloadVideo').click(function () {
                const url = $('#url').val();
                const quality = $('#qualitySelect').val();
                $.post('/download', { url: url, quality: quality }, function (data) {
                    if (data.download_url) {
                        window.location.href = data.download_url;  // Arahkan ke link download
                    } else {
                        alert(data.error);
                    }
                });
            });
        });
    </script>
</body>
</html>
